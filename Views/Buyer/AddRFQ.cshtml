@model RFQ
@{
    ViewData["Title"] = "Add RFQ";
    Layout = "~/Views/Shared/_BuyerLayout.cshtml";
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Add RFQ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        body {
            background-color: #f8f9fa;
        }

        .step-nav {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
            list-style-type: none;
            counter-reset: step;
        }

            .step-nav li {
                position: relative;
                text-align: center;
                flex: 1;
                font-weight: 500;
                color: #6c757d;
            }

                .step-nav li::before {
                    counter-increment: step;
                    content: counter(step);
                    width: 40px;
                    height: 40px;
                    line-height: 40px;
                    display: block;
                    margin: 0 auto 10px;
                    border-radius: 50%;
                    background-color: #dee2e6;
                    color: #495057;
                }

                .step-nav li.active::before,
                .step-nav li.completed::before {
                    background-color: #0d6efd;
                    color: #fff;
                }

                .step-nav li.completed {
                    color: #198754;
                }

                .step-nav li::after {
                    content: '';
                    position: absolute;
                    top: 20px;
                    right: -50%;
                    width: 100%;
                    height: 2px;
                    background-color: #dee2e6;
                    z-index: -1;
                }

                .step-nav li:last-child::after {
                    display: none;
                }

                .step-nav li.completed::after {
                    background-color: #198754;
                }

        .tab-pane {
            animation: fadeIn .5s ease-in-out;
        }

        @@keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div class="container-fluid px-5 py-4">
        <div class="card shadow-lg border-0">
            <div class="card-header bg-light text-dark border-bottom">
                <h4 class="mb-0" style="color:dodgerblue">Add RFQ</h4>
            </div>


            <div class="card-body">

                <!-- ✅ Custom Step Indicator -->
                <ul class="step-nav mb-4" id="stepIndicator">
                    <li class="active" data-step="0">RFQ BID DETAILS</li>
                    <li data-step="1">BID ITEMS</li>
                    <li data-step="2">DURATION AND VENDORS</li>
                </ul>

                <form method="post">
                    <div class="tab-content" />

                    <!-- Step 1 -->

                    <div class="tab-pane fade show active" id="step1">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">RFQ No</label>
                                <input type="text" class="form-control" asp-for="RFQNo" readonly />
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Indent No</label>
                                <input type="text" class="form-control" asp-for="IndentNo" readonly />
                            </div>
                        </div>



                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">Mobile No</label>
                                <input type="text" class="form-control" asp-for="Mobile" />
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Contact Person</label>
                                <input type="text" class="form-control" asp-for="ContactPerson" />
                            </div>
                        </div>

                        <div class="d-flex justify-content-end">
                            <button type="button" class="btn btn-primary" onclick="goToStep(1)">Next</button>

                        </div>
                    </div>


                    <!-- Step 2 -->
                    <div class="tab-pane fade" id="step2">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">Indent No</label>
                                <input type="text" class="form-control" asp-for="IndentNo" readonly />
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Line No</label>
                                <input type="text" class="form-control" asp-for="RFQLineNo" />
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">Item No</label>
                                <input type="text" class="form-control" asp-for="ItemNo" />
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Item Name</label>
                                <input type="text" class="form-control" asp-for="ItemName" />
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">Required Quantity</label>
                                <input type="text" class="form-control" asp-for="ReqQty" />
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">UOM</label>
                                <input type="text" class="form-control" asp-for="UOM" />
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">Required Delivery Date</label>
                                <input type="date" class="form-control" asp-for="ReqDeliveryDate" />
                            </div>
                            <div class="col-md-6">
                                <label class="form-label"> Delivery Location</label>
                                <input type="text" class="form-control" asp-for="DeliveryLocation" />
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Factory Code</label>
                                <input type="text" class="form-control" asp-for="FactoryCode" />
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <textarea class="form-control" asp-for="Description"></textarea>
                        </div>

                        <div class="d-flex justify-content-between">
                            <button type="button" class="btn btn-secondary" onclick="goToStep(0)">Previous</button>
                            <button type="button" class="btn btn-primary" onclick="goToStep(2)">Next</button>
                        </div>
                    </div>

                    <!-- Step 3 -->
                    <div class="tab-pane fade" id="step3">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">Bid Start Date</label>
                                <input type="date" class="form-control" asp-for="BidDate" />
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Bid End Date</label>
                                <input type="date" class="form-control" asp-for="ExpiryDateofBid" />
                            </div>
                        </div>

                        <!-- Vendor Dropdown with Checkboxes -->
                        <div class="row mb-3">
                            <div class="col-md-12">
                                <label class="form-label">Select Vendors</label>
                                <div class="dropdown">
                                    <button class="btn btn-outline-primary dropdown-toggle w-20 text-start" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                        Choose Vendors
                                    </button>
                                    <ul class="dropdown-menu p-3" style="max-height: 300px; overflow-y: auto; width: 100%;">
                                        <!-- Select All Option -->
                                        <li>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="selectAllVendors">
                                                <label class="form-check-label fw-bold" for="selectAllVendors">
                                                    Select All Vendors
                                                </label>
                                            </div>
                                            <hr />
                                        </li>

                                        <!-- Individual Vendor Checkboxes -->
                                        @foreach (var vendor in (List<User>)ViewBag.Vendors)
                                        {
                                            <li>
                                                <div class="form-check">
                                                    <input class="form-check-input vendor-checkbox" type="checkbox" name="SelectedVendors" value="@vendor.UserId" id="vendor_@vendor.UserId">
                                                    <label class="form-check-label" for="vendor_@vendor.UserId">
                                                        @vendor.FullName
                                                    </label>
                                                </div>
                                            </li>
                                        }
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="d-flex justify-content-between">
                            <button type="button" class="btn btn-secondary" onclick="goToStep(1)">Previous</button>
                            <button type="submit" class="btn btn-primary">Submit</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Bootstrap Bundle JS -->

    <script>
        const tabPanes = document.querySelectorAll('.tab-pane');
        const steps = document.querySelectorAll('.step-nav li');

        function goToStep(stepIndex) {
            tabPanes.forEach((pane, idx) => {
                pane.classList.remove('show', 'active');
                if (idx === stepIndex) {
                    pane.classList.add('show', 'active');
                }
            });

            steps.forEach((step, idx) => {
                step.classList.remove('active', 'completed');
                if (idx < stepIndex) step.classList.add('completed');
                if (idx === stepIndex) step.classList.add('active');
            });
        }
    </script>
</body>
</html>
<script src="~/js/selectall.js"></script>